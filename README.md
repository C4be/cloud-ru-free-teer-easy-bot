# cloud-ru-free-teer-easy-bot

Telegram-бот «Записная книжка» — сохраняйте заметки прямо в чате и находите их по ключевым словам.

---

## Содержание

- [Описание](#описание)
- [Возможности](#возможности)
- [Команды бота](#команды-бота)
- [Требования](#требования)
- [Быстрый старт (локально)](#быстрый-старт-локально)
- [Запуск через Docker Compose](#запуск-через-docker-compose)
- [Переменные окружения](#переменные-окружения)
- [Структура проекта](#структура-проекта)

---

## Описание

Бот работает как персональная записная книжка внутри Telegram. Каждый пользователь хранит свои заметки отдельно. Данные сохраняются в базе данных SQLite, которая при развёртывании через Docker монтируется как постоянный том.

---

## Возможности

- Сохранение произвольных текстовых заметок.
- Просмотр последней сохранённой заметки.
- Полнотекстовый поиск по ключевому слову среди всех ваших заметок.
- Изоляция данных: каждый пользователь видит только свои заметки.

---

## Команды бота

| Команда | Описание | Пример |
|---|---|---|
| `/start` | Приветствие и список доступных команд | `/start` |
| `/remember <текст>` | Сохранить новую заметку | `/remember Купить молоко` |
| `/remind` | Показать последнюю сохранённую заметку | `/remind` |
| `/remind <ключевое слово>` | Найти все заметки, содержащие ключевое слово | `/remind молоко` |

### Примеры использования

```
/remember Позвонить в банк завтра в 10:00
→ Заметка сохранена!

/remind
→ Позвонить в банк завтра в 10:00

/remember Купить молоко и хлеб
/remind молоко
→ • Купить молоко и хлеб
```

---

## Требования

- Python 3.10+ (Docker-образ использует Python 3.11)
- Токен Telegram-бота (получить у [@BotFather](https://t.me/BotFather))
- Docker и Docker Compose (опционально, для контейнерного запуска)

---

## Быстрый старт (локально)

1. **Клонируйте репозиторий:**

   ```bash
   git clone https://github.com/C4be/cloud-ru-free-teer-easy-bot.git
   cd cloud-ru-free-teer-easy-bot
   ```

2. **Создайте виртуальное окружение и установите зависимости:**

   ```bash
   python -m venv .venv
   source .venv/bin/activate   # Windows: .venv\Scripts\activate
   pip install -r requirements.txt
   ```

3. **Настройте переменные окружения:**

   ```bash
   cp .env.example .env
   # Откройте .env и укажите свой BOT_TOKEN
   ```

4. **Запустите бота:**

   ```bash
   python bot.py
   ```

   Бот начнёт принимать сообщения. Остановить можно нажатием `Ctrl+C`.

---

## Запуск через Docker Compose

1. **Настройте переменные окружения:**

   ```bash
   cp .env.example .env
   # Откройте .env и укажите свой BOT_TOKEN
   ```

2. **Запустите контейнер:**

   ```bash
   docker compose up -d
   ```

   Сервис автоматически перезапускается при сбоях (`restart: unless-stopped`). База данных хранится в Docker-томе `notes_data` и не теряется при пересборке контейнера.

3. **Просмотр логов:**

   ```bash
   docker compose logs -f
   ```

4. **Остановка:**

   ```bash
   docker compose down
   ```

---

## Переменные окружения

| Переменная | Обязательная | По умолчанию | Описание |
|---|---|---|---|
| `BOT_TOKEN` | ✅ | — | Токен Telegram-бота, полученный у @BotFather |
| `DB_PATH` | ❌ | `notes.db` | Путь к файлу базы данных SQLite |

При запуске через Docker Compose переменная `DB_PATH` автоматически задаётся как `/app/data/notes.db` и данные сохраняются в постоянный том.

---

## Структура проекта

```
.
├── bot.py             # Точка входа: обработчики команд Telegram
├── database.py        # Работа с базой данных SQLite (сохранение и поиск заметок)
├── requirements.txt   # Зависимости Python
├── Dockerfile         # Образ для сборки контейнера
├── docker-compose.yml # Конфигурация для запуска через Docker Compose
└── .env.example       # Пример файла с переменными окружения
```
